@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --primary: 224 47% 14%;
  --primary-foreground: 210 40% 98%;
  --primary-light: 225 18% 23%;
  --secondary: 45 100% 48%;
  --secondary-foreground: 222.2 84% 4.9%;
  --secondary-dark: 44 100% 45%;
  --accent: 356.5 91.6% 56.5%;
  --accent-foreground: 210 40% 98%;
  --accent-light: 0 91% 71%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --ring: 215 20.2% 65.1%;
  --radius: 0.5rem;
  --success: 142 70% 45%;
  --error: 0 84% 60%;
  
  /* Game ball animation variables */
  --ball-top: 50%;
  --ball-left: 50%;
  --ball-visible: 1;
  --ball-size: 30px;
  --ball-glow: rgba(255, 165, 0, 0.8);
  --ball-glow-intensity: 12px;
  --ball-opacity: 1;
  --ball-rotation-speed: 0.8s;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --primary: 224 47% 14%;
  --primary-foreground: 210 40% 98%;
  --primary-light: 225 18% 23%;
  --secondary: 45 100% 48%;
  --secondary-foreground: 222.2 84% 4.9%;
  --secondary-dark: 44 100% 45%;
  --accent: 356.5 91.6% 56.5%;
  --accent-foreground: 210 40% 98%;
  --accent-light: 0 91% 71%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --ring: 217.2 32.6% 17.5%;
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply font-sans antialiased bg-gray-100 text-foreground;
  }
}

/* Game-specific styles */
.game-stone {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.game-stone:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
}
.stone-roll-animation {
  animation: rollStone 0.8s ease-in-out infinite;
  box-shadow: 0 0 15px 5px rgba(248, 181, 0, 0.7);
  z-index: 10;
}
@keyframes rollStone {
  0% { transform: rotateY(0deg) scale(1); }
  50% { transform: rotateY(180deg) scale(1.15); }
  100% { transform: rotateY(360deg) scale(1); }
}

/* Enhanced rolling dice animation */
.rolling-dice {
  position: relative;
}

/* Ball rolling animation */
.rolling-ball {
  animation: ballRolling 0.3s infinite linear, ballPulse 1s infinite alternate;
}

@keyframes ballRolling {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes ballPulse {
  0% { transform: scale(1); }
  100% { transform: scale(1.15); }
}

/* Add ball rolling effect */
.ball-rotate {
  animation: ballRotate 0.5s linear infinite;
}

@keyframes ballRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.rolling-dice::before {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,215,0,0.4) 0%, rgba(255,255,255,0) 70%);
  z-index: -1;
  animation: pulseBg 1s infinite;
}

@keyframes pulseBg {
  0% { opacity: 0.3; transform: scale(0.9); }
  50% { opacity: 0.8; transform: scale(1.05); }
  100% { opacity: 0.3; transform: scale(0.9); }
}

/* Demo stone roll animation */
@keyframes roll-stone {
  0% { transform: rotate(0deg) scale(1.2); }
  25% { transform: rotate(90deg) scale(1.3); }
  50% { transform: rotate(180deg) scale(1.2); }
  75% { transform: rotate(270deg) scale(1.3); }
  100% { transform: rotate(360deg) scale(1.2); }
}

.stone-roll-animation {
  animation: roll-stone 0.8s linear infinite !important;
  box-shadow: 0 0 15px 5px rgba(248, 181, 0, 0.7) !important;
  z-index: 50 !important;
  transform: scale(1.2) !important;
  position: relative !important;
}

/* Fallback animation if the above doesn't work */
@keyframes simple-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.simple-rotating {
  animation: simple-rotate 1s linear infinite !important;
}
.active-player {
  animation: pulsePlayer 2s infinite;
}
@keyframes pulsePlayer {
  0% { box-shadow: 0 0 0 0 rgba(248, 181, 0, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(248, 181, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(248, 181, 0, 0); }
}

/* Shaking board animation for demo */
.shaking-board {
  animation: shakeBoard 0.5s cubic-bezier(.36,.07,.19,.97) both;
  animation-iteration-count: 3;
  transform-origin: center center;
}

@keyframes shakeBoard {
  0% { transform: translate(0, 0) rotate(0); }
  10% { transform: translate(-1px, -2px) rotate(-1deg); }
  20% { transform: translate(2px, 0) rotate(1deg); }
  30% { transform: translate(-2px, 2px) rotate(0); }
  40% { transform: translate(1px, -1px) rotate(1deg); }
  50% { transform: translate(-1px, 2px) rotate(-1deg); }
  60% { transform: translate(-2px, 1px) rotate(0); }
  70% { transform: translate(2px, 1px) rotate(-1deg); }
  80% { transform: translate(-1px, -1px) rotate(1deg); }
  90% { transform: translate(1px, 2px) rotate(0); }
  100% { transform: translate(0, 0) rotate(0); }
}

/* Ultra-simple fallback animation */
@keyframes basic-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.basic-spin {
  animation: basic-spin 0.8s linear infinite;
  box-shadow: 0 0 10px 2px gold !important;
}

/* Realistic 3D dice roll animation */
@keyframes dice-roll {
  0% { 
    transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); 
    box-shadow: 0 0 10px 4px rgba(255, 215, 0, 0.8);
  }
  20% { 
    transform: rotateX(180deg) rotateY(90deg) rotateZ(45deg) scale(1.15); 
    box-shadow: 0 0 25px 8px rgba(255, 215, 0, 0.9);
  }
  40% { 
    transform: rotateX(90deg) rotateY(270deg) rotateZ(180deg) scale(1.2); 
    box-shadow: 0 0 35px 10px rgba(255, 215, 0, 1);
  }
  60% { 
    transform: rotateX(360deg) rotateY(180deg) rotateZ(270deg) scale(1.2); 
    box-shadow: 0 0 40px 15px rgba(255, 136, 0, 0.9);
  }
  80% { 
    transform: rotateX(180deg) rotateY(360deg) rotateZ(90deg) scale(1.15); 
    box-shadow: 0 0 30px 10px rgba(255, 215, 0, 0.8);
  }
  100% { 
    transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg) scale(1); 
    box-shadow: 0 0 10px 4px rgba(255, 215, 0, 0.8);
  }
}

.dice-roll {
  animation: dice-roll 0.8s linear infinite;
  box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.8) !important;
  z-index: 50 !important;
  transform-origin: center center;
  transform-style: preserve-3d;
  position: relative !important;
}

/* Dice element styling */
.dice-element {
  width: 40px;
  height: 40px;
  background: transparent;
  position: absolute;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease-in-out;
}

.inner-ball {
  width: 100%;
  height: 100%;
  background: white;
  border-radius: 50%;
  box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.8);
  border: 3px solid gold;
  animation: bounce-spin 0.5s ease-in-out infinite alternate;
}

@keyframes bounce-spin {
  0% { transform: scale(1) rotate(0deg); }
  100% { transform: scale(1.2) rotate(180deg); }
}

/* Animation for the rolling ball */
@keyframes roll-glow {
  0% { 
    transform: scale(1) rotate(0deg) translate(-50%, -50%); 
    box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.7); 
    filter: blur(0.5px);
  }
  20% { 
    transform: scale(1.2) rotate(72deg) translate(-50%, -50%); 
    box-shadow: 0 0 30px 12px rgba(255, 136, 0, 0.8); 
    filter: blur(1px);
  }
  40% { 
    transform: scale(1.3) rotate(144deg) translate(-50%, -50%); 
    box-shadow: 0 0 40px 18px rgba(255, 215, 0, 0.9);
    filter: blur(1.5px);
  }
  60% { 
    transform: scale(1.25) rotate(216deg) translate(-50%, -50%); 
    box-shadow: 0 0 45px 20px rgba(255, 255, 0, 0.9);
    filter: blur(1.5px);
  }
  80% { 
    transform: scale(1.15) rotate(288deg) translate(-50%, -50%); 
    box-shadow: 0 0 35px 15px rgba(255, 136, 0, 0.8);
    filter: blur(1px);
  }
  100% { 
    transform: scale(1) rotate(360deg) translate(-50%, -50%); 
    box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.7);
    filter: blur(0.5px);
  }
}

/* Animation for shaking the board when a roll happens */
@keyframes shakeBoard {
  0% { transform: translate(0, 0) rotate(0); }
  10% { transform: translate(-3px, -4px) rotate(-1.5deg); }
  20% { transform: translate(4px, 0) rotate(1.5deg); }
  30% { transform: translate(-4px, 3px) rotate(-0.5deg); }
  40% { transform: translate(3px, -2px) rotate(1.5deg); }
  50% { transform: translate(-3px, 4px) rotate(-1.5deg); }
  60% { transform: translate(-4px, 2px) rotate(-0.5deg); }
  70% { transform: translate(4px, 2px) rotate(-1.5deg); }
  80% { transform: translate(-2px, -3px) rotate(1.5deg); }
  90% { transform: translate(3px, 4px) rotate(-0.5deg); }
  100% { transform: translate(0, 0) rotate(0); }
}

.roll-animation {
  animation: roll-glow 0.8s linear infinite;
}

.shaking-board {
  animation: shakeBoard 0.45s cubic-bezier(.36,.07,.19,.97) both;
  animation-iteration-count: 4;
  transform-origin: center center;
}

:root {
  --ball-top: 50%;
  --ball-left: 50%;
}

.ball-element {
  position: absolute !important;
  width: var(--ball-size) !important;
  height: var(--ball-size) !important;
  border-radius: 50% !important;
  background: radial-gradient(circle, white 20%, #FF8800 60%, gold 100%) !important;
  border: 5px solid gold !important;
  z-index: 9999 !important;
  transition: top 0.25s ease-out, left 0.25s ease-out !important; /* Faster transitions for more responsive animation */
  box-shadow: 0 0 var(--ball-glow-intensity) calc(var(--ball-glow-intensity) / 2) var(--ball-glow) !important;
  transform: translate(-50%, -50%) !important; /* This ensures the ball is properly centered */
  filter: blur(0.5px) !important; /* Slight blur for motion effect */
  display: block !important;
  visibility: visible !important;
  opacity: var(--ball-opacity) !important;
  pointer-events: none !important; /* Ensure it doesn't interfere with clicks */
  top: var(--ball-top) !important;
  left: var(--ball-left) !important;
}

/* Ball animation for the test page */
.ball-test-animation {
  animation: ball-test-roll var(--ball-rotation-speed) linear infinite;
}

@keyframes ball-test-roll {
  0% { 
    transform: translate(-50%, -50%) rotate(0deg) scale(1);
    box-shadow: 0 0 15px 8px rgba(255, 165, 0, 0.7);
  }
  50% { 
    transform: translate(-50%, -50%) rotate(180deg) scale(1.15);
    box-shadow: 0 0 25px 12px rgba(255, 136, 0, 0.9);
  }
  100% { 
    transform: translate(-50%, -50%) rotate(360deg) scale(1);
    box-shadow: 0 0 15px 8px rgba(255, 165, 0, 0.7);
  }
}

/* Enhanced styles specifically for game/2 page */
.game-2-specific .ball-element {
  width: 70px !important;
  height: 70px !important;
  background: radial-gradient(circle, white 15%, #FF5500 50%, gold 100%) !important;
  border: 6px solid gold !important;
  box-shadow: 0 0 40px 20px rgba(255, 85, 0, 0.8) !important;
  animation: enhanced-ball-animation 1.5s infinite alternate !important;
}

/* Animation specifically for game/2 */
@keyframes enhanced-ball-animation {
  0% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg) !important;
    box-shadow: 0 0 30px 15px rgba(255, 136, 0, 0.7) !important;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2) rotate(180deg) !important;
    box-shadow: 0 0 50px 25px rgba(255, 85, 0, 0.9) !important;
  }
  100% {
    transform: translate(-50%, -50%) scale(1) rotate(360deg) !important;
    box-shadow: 0 0 30px 15px rgba(255, 136, 0, 0.7) !important;
  }
}

/* Apply special styles when specific game animation is active */
.specific-game-animation .ball-element {
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  width: 80px !important;
  height: 80px !important;
  box-shadow: 0 0 50px 25px rgba(255, 85, 0, 0.9) !important;
  animation: enhanced-ball-pulse 1s infinite alternate !important;
}

@keyframes enhanced-ball-pulse {
  0% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    box-shadow: 0 0 30px 15px rgba(255, 215, 0, 0.8);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.3) rotate(180deg);
    box-shadow: 0 0 60px 30px rgba(255, 85, 0, 1);
  }
  100% {
    transform: translate(-50%, -50%) scale(1) rotate(360deg);
    box-shadow: 0 0 30px 15px rgba(255, 215, 0, 0.8);
  }
}

/* Float animation for the rolling ball */
.specific-game-animation .ball-element.floating {
  animation: float-around 3s infinite alternate ease-in-out !important;
}

/* Enhanced board styles for game/2 */
.board-enhanced {
  box-shadow: 0 0 30px 10px rgba(255, 215, 0, 0.3) inset !important;
  background: linear-gradient(145deg, rgba(33, 38, 45, 0.9), rgba(33, 38, 45, 1)) !important;
  border-color: gold !important;
  transition: all 0.5s ease-in-out !important;
}

.board-enhanced .game-stone {
  transition: transform 0.4s ease-in-out, box-shadow 0.4s ease, opacity 0.4s !important;
}

.board-enhanced .game-stone:hover {
  transform: translateY(-8px) scale(1.1) !important;
  box-shadow: 0 12px 20px -5px rgba(255, 215, 0, 0.4) !important;
  z-index: 100 !important;
}

/* Float animation for the ball in game/2 when not rolling */
@keyframes float-around {
  0% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    box-shadow: 0 0 30px 15px rgba(255, 136, 0, 0.7);
    top: 40%;
    left: 40%;
  }
  25% {
    transform: translate(-50%, -50%) scale(1.1) rotate(90deg);
    box-shadow: 0 0 40px 20px rgba(255, 85, 0, 0.8);
    top: 60%;
    left: 40%;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2) rotate(180deg);
    box-shadow: 0 0 50px 25px rgba(255, 85, 0, 0.9);
    top: 60%;
    left: 60%;
  }
  75% {
    transform: translate(-50%, -50%) scale(1.1) rotate(270deg);
    box-shadow: 0 0 40px 20px rgba(255, 85, 0, 0.8);
    top: 40%;
    left: 60%;
  }
  100% {
    transform: translate(-50%, -50%) scale(1) rotate(360deg);
    box-shadow: 0 0 30px 15px rgba(255, 136, 0, 0.7);
    top: 40%;
    left: 40%;
  }
}
